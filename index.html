<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Football Studio - Verificador</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f1f5f9;
      text-align: center;
      margin: 0;
      padding: 20px;
    }
    h1 { margin-top: 0; }
    button {
      padding: 10px 20px;
      margin: 10px;
      font-size: 16px;
      border: none;
      border-radius: 8px;
      color: white;
      cursor: pointer;
    }
    .btn-casa { background-color: red; }
    .btn-visitante { background-color: blue; }
    .btn-resultado { margin: 5px; }
    .btn-result-casa { background-color: red; }
    .btn-result-visitante { background-color: blue; }
    .btn-result-empate { background-color: goldenrod; }
    .stats-box {
      background-color: white;
      border-radius: 12px;
      padding: 15px;
      margin-top: 20px;
      display: inline-block;
      text-align: left;
    }
    .history-visual {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      margin-top: 20px;
      gap: 10px;
    }
    .history-item {
      text-align: center;
      width: 50px;
    }
    .circle {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      margin: 0 auto;
    }
    .casa { background-color: red; }
    .visitante { background-color: blue; }
    .empate { background-color: goldenrod; }
    .reset-btn { background-color: #64748b; margin-top: 15px; }
  </style>
</head>
<body>

<h1>‚öΩ Football Studio - Verificador</h1>

<div>
  <button class="btn-casa" onclick="registrarSinal('Casa')">Casa</button>
  <button class="btn-visitante" onclick="registrarSinal('Visitante')">Visitante</button>
</div>

<div id="resultado-opcoes" style="display:none;">
  <p>Rodada <span id="rodada-num"></span>: Qual foi o resultado?</p>
  <button class="btn-resultado btn-result-casa" onclick="registrarResultado('Casa')">Casa</button>
  <button class="btn-resultado btn-result-visitante" onclick="registrarResultado('Visitante')">Visitante</button>
  <button class="btn-resultado btn-result-empate" onclick="registrarResultado('Empate')">Empate</button>
</div>

<div class="stats-box">
  <h3>üìä Estat√≠sticas</h3>
  <p>‚úÖ Greens totais: <span id="greens">0</span></p>
  <p>‚ùå Reds totais: <span id="reds">0</span></p>
  <p>üìà Assertividade: <span id="assertividade">0%</span></p>
  <p>üïí Rodadas registradas: <span id="rodadasRegistradas">0</span></p>
</div>

<div class="history-visual" id="historicoVisual"></div>

<button class="reset-btn" onclick="resetarTudo()">üîÑ Resetar tudo</button>
<button class="reset-btn" onclick="desfazerRodada()">‚Ü©Ô∏è Desfazer rodada</button>

<script>
  let rodada = 0;
  let sinalAtual = '';
  let galeUsado = false;

  let stats = JSON.parse(localStorage.getItem('statsFS')) || {
    greens: 0,
    reds: 0,
    rodadas: 0,
    historico: []
  };

  function salvarDados() {
    localStorage.setItem('statsFS', JSON.stringify(stats));
  }

  function registrarSinal(sinal) {
    sinalAtual = sinal;
    document.getElementById("rodada-num").innerText = rodada + 1;
    document.getElementById("resultado-opcoes").style.display = "block";
  }

  function registrarResultado(resultado) {
    document.getElementById("resultado-opcoes").style.display = "none";
    let green = false;
    let red = false;

    if (resultado === 'Empate' || resultado === sinalAtual) {
      green = true;
      stats.greens++;
      galeUsado = false;
      rodada++;
      stats.rodadas++;
    } else if (!galeUsado) {
      galeUsado = true;
      document.getElementById("rodada-num").innerText = rodada + 1;
      document.getElementById("resultado-opcoes").style.display = "block";
      return;
    } else {
      red = true;
      stats.reds++;
      galeUsado = false;
      rodada++;
      stats.rodadas++;
    }

    stats.historico.push({ rodada, resultado });
    if (stats.historico.length > 20) stats.historico.shift();

    atualizarEstatisticas();
    renderizarHistoricoVisual();
    salvarDados();
  }

  function atualizarEstatisticas() {
    const total = stats.greens + stats.reds;
    const assertividade = total > 0 ? ((stats.greens / total) * 100).toFixed(1) : 0;

    document.getElementById("greens").innerText = stats.greens;
    document.getElementById("reds").innerText = stats.reds;
    document.getElementById("assertividade").innerText = assertividade + "%";
    document.getElementById("rodadasRegistradas").innerText = stats.rodadas;
  }

  function renderizarHistoricoVisual() {
    const container = document.getElementById("historicoVisual");
    container.innerHTML = '';
    stats.historico.forEach(item => {
      const div = document.createElement("div");
      div.classList.add("history-item");
      div.innerHTML = `<div>${item.rodada}</div><div class="circle ${item.resultado.toLowerCase()}"></div>`;
      container.appendChild(div);
    });
  }

  function resetarTudo() {
    if (!confirm("Tem certeza que deseja resetar tudo?")) return;
    rodada = 0;
    stats = { greens: 0, reds: 0, rodadas: 0, historico: [] };
    localStorage.removeItem('statsFS');
    atualizarEstatisticas();
    renderizarHistoricoVisual();
  }

  function desfazerRodada() {
    if (stats.historico.length === 0) return;
    const ultima = stats.historico.pop();
    rodada--;
    stats.rodadas--;
    if (ultima.resultado === 'Empate' || ultima.resultado === sinalAtual) {
      stats.greens--;
    } else {
      stats.reds--;
    }
    atualizarEstatisticas();
    renderizarHistoricoVisual();
    salvarDados();
  }

  atualizarEstatisticas();
  renderizarHistoricoVisual();
</script>

</body>
</html>
